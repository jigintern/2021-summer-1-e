<!DOCTYPE html>
<html lang=“ja”>

<head>
    <meta charset="utf-8">
    <title>TRIP LIST【profilepage】</title>
    <link rel="stylesheet" href="profile.css">
    <script src="./profile.js" async></script>

</head>

<body>
    <h1 class="main"><a id="homepage" href="./index.html">TRIP LIST</a></h1>
    <div id="profilemain">
        <img src="./profileimg/profile.png" id="profileimg" />
        <div id="profile">
            <div id="profile_text">
                <h2 id="profile_name">高専太郎</h2>
                <h3>フォロワー: 60人 フォロー: 40人</h3>
                <h3 id="comment">高専卒の現役エンジニアです。<br />普段は都内をサイクリングしています。<br />
                    休日には、地方に旅行に行きます！！</h3> <!-- デザインを綺麗にする後で -->
            </div>
        </div>
    </div>
    <h1 class="main">公開しているTRIPLIST</h1>
    <div class="tripbox">
        <p>
        <h2 id="triptitle">超綺麗な夜景を最高に楽しめる計画を立てた</h2>
        </p>
        <p><a href=""><img id="triplistimg" src="./profileimg/sample_profile_triplist.jpg" align="left"></a>
            〇〇の夜景がすごい綺麗だと伺ったので、<br>早速向かってみました。<br>夜になるまでに時間が沢山あるので、まずは✕✕というラーメン屋さんに突撃！</p>
        <br clear="left">
    </div>
    <div class="tripbox">
        <p>
        <h2 id="triptitle">北極点がめちゃくちゃカッコよく見える場所に来てみた</h2>
        </p>
        <p> <a href=""><img id="triplistimg" src="./profileimg/sample_profile_triplist2.jpg" align="left"></a>
            〇〇まで１週間の旅行が決まったので、道中で気になっていた✕✕に向かうことに！</p>
        <br clear="left">
    </div>
    <div class="tripbox">
        <p>
        <h2 id="triptitle">満開の桜を見るにはここしかない！</h2>
        </p>
        <p><a href=""><img id="triplistimg" src="./profileimg/sample_profile_triplist3.jpg" align="left"></a>
            桜ｻｲｺｰ<br>メンターｻｲｷｮｰ</p>
        <br clear="left">
    </div>
    <script type="module">
        import { fetchJSON } from "https://js.sabae.cc/fetchJSON.js";
        onload = async () => {

            const query = location.search;
            const v = query.split('=');
            const hashKey = v[1];
            console.log(hashKey);

            const hashKey1 = sessionStorage.getItem('hashKey');
            console.log(hashKey1);

            const account = await fetchJSON("/api/account/findByHashKey", {
                hashKey: hashKey
            });

            const username = account["username"];
            const comment = account["comment"];
            document.getElementById("profile_name").innerHTML = username;
            document.getElementById("comment").innerHTML = comment;

            const id_user = account["id"];
            const user_data = await fetchJSON("api/article/find", {
                id_user: id_user
            });

            console.log(user_data);
            
            data_length = user_data.length;

            for(let i=0; i < data_length; i++){

            }


        }
    </script>

</body>

</html>